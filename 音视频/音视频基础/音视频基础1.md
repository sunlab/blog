## 一：直播产品的种类

1.1泛娱乐化直播：花椒、映客等娱乐直播，斗鱼、熊猫等游戏直播

产品特点：以美女主播展示才艺为主，如唱歌、跳舞等

1.2实时互动直播：音视频会议、教育直播等，如思科、全时、声网等

产品特点：多人多视频实时互动

## 二：架构对比

### 2.1泛娱乐化直播架构

![](https://raw.githubusercontent.com/sunlab/pics/master/567830-20190907140718467-1847506045.png)

泛娱乐化直播架构主要由4部分组成，主播端+信令服务器+流媒体云+普罗观众

1.主播发起信令到信令服务器，信令服务器受到信息后在服务端处理相关信息如创建房间；处理成功后返回给共享端一个流媒体云的地址

2.共享端采集自己的音视频数据形成rtmp流推送到cdn网络

3.观众端想观看主播的节目，先发送信令到信令服务器，信令服务器收到信息后加入到该主播房间；处理成功后返回给客户端一个流媒体云的地址（即想看的美女主播的地址）

4.观众到cdn网络拉去该流，从而看到想看的节目

### 2.2实时互动直播架构

![](https://raw.githubusercontent.com/sunlab/pics/master/567830-20190907150330425-1088275539.png)

1.实时互动需要使用UDP协议

2.后台服务端需要有多个节点，一个节点出现问题，可以快速切换到另一个节点；保证每个节点负载均衡，降低风险。

3.控制中心主要负责节点的状态，通过心跳进行实时通信；每个节点定期的向控制中心报告自己的健康指数（cpu内存等）。

控制中心根据汇报上的数据进行决策如何分配。

4.内总线：节点与控制中心进行通信，通过心跳；内总线的好处可以保证心跳的安全，有很高的的吞吐量，更好的控制；

媒体服务器：UDP协议传输的RTP的包，通过媒体传输到内部总线，通内部总线传输到媒体服务器；最终在媒体服务器将RTP包转换成RTMP包。
